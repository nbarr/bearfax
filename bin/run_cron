#!/bin/sh

# Call from crontab
# */5 * * * * uwsgi bearfax 'cd /srv/bearfax; bin/run_cron' | /bin/bash


VENV=.venv

if [ ! -d "$VENV" ]; then
    echo Virtual environment "$VENV" folder not found
    exit
fi

source ./.venv/bin/activate

end_of_file=0
while [[ $end_of_file == 0 ]]
do
  read -r line
  end_of_file=$?
  export $line
done < ./vars

python -c "import application.cron; application.cron.run()"
